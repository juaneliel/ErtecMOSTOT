<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:p="http://primefaces.org/ui">
 
 
  <ui:composition>

    <h:form id="formreclamo">
  

 
  
  
		<p:dataTable var="reclamo" value="#{paramLista}"  id="datatable2"  emptyMessage="Sin Registros"
			paginator="true" rows ="50" resizableColumns="true" liveResize="true" draggableColumns="true" 
			scrollable="true" scrollHeight="500"  scrollWidth="100%"   
			editable="true" 
			style="text-align:left; font-size: 90% !important;color: red;font-weight: bold;"
			rowStyleClass="#{(reclamo.urgente) =='SI' ? 'urgente' : ''}" 
			selection="#{mb_Reclamo.reclamoSelected}" selectionMode="single" rowKey="#{reclamo.id}"
			>
		 
		<f:facet name="header" styleClass="cabecera">
			#{paramCabecera}
			<p:commandButton id="toggler" type="button" value="Elegir Columnas" style="float:right" icon="ui-icon-calculator" />
			<p:columnToggler datasource="datatable2" trigger="toggler" >
		  	<p:ajax event="toggle" listener="#{mb_Reclamo.onToggle}" />
			</p:columnToggler>
		</f:facet>
				 
		<p:ajax event="rowEdit" listener="#{mb_Reclamo.editReclamo}" update="message reclamo" />	  
	 

  
  
		 
		<p:column headerText="Id" sortBy="#{reclamo.id}" visible="#{mb_Reclamo.list[0]}"  filterMatchMode="startsWith" filterBy="#{reclamo.id}">
			<h:outputText  value="#{reclamo.id}"/>
		</p:column>
				 
		<p:column headerText="Cliente:"  visible="#{mb_Reclamo.list[1]}" style="min-width:120px;" sortBy="#{reclamo.nombreCliente}"  filterMatchMode="contains" filterBy="#{reclamo.nombreCliente}">		                
			<p:cellEditor>
      	<f:facet name="output"><h:outputText value="#{reclamo.nombreCliente}" /></f:facet>
       	<f:facet name="input">
       		<p:autoComplete  id="cliente" value="#{reclamo.cliente}"
		 				completeMethod="#{mb_Cliente.completarCliente}" 
						var="theme" itemLabel="#{theme.nombre}" itemValue="#{theme}"
		 				converter="ConverterCliente" forceSelection="false"
		 				style="float:left !important;margin:0px 0px 3px 0px;"/> 		         
	    	</f:facet>
			</p:cellEditor>
		</p:column>  
		 

		<p:column headerText="Codigo" visible="#{mb_Reclamo.list[2]}" sortBy="#{reclamo.codigo}"  filterMatchMode="contains" filterBy="#{reclamo.codigo}">		                
			<p:cellEditor>
       	<f:facet name="output"><h:outputText value="#{reclamo.codigo}" /></f:facet>
      	<f:facet name="input"><p:inputText id="codigo" value="#{reclamo.codigo}"  /></f:facet>
      </p:cellEditor>
		</p:column> 

	 	<p:column headerText="Reclamo" visible="#{mb_Reclamo.list[3]}" sortBy="#{reclamo.reclamo}"   filterMatchMode="contains" filterBy="#{reclamo.reclamo}">		                
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{reclamo.reclamo}" /></f:facet>
	    	<f:facet name="input">
	    	<p:inputTextarea value="#{reclamo.reclamo}"  id="reclamo"  rows="3" cols="20"  maxlength="1000" counterTemplate="{0} characters remaining." />
            	
	    	</f:facet>
   		</p:cellEditor>
		</p:column> 
		
		 
		
  
  	<p:column headerText="F.Reclamado" visible="#{mb_Reclamo.list[4]}" sortBy="#{reclamo.fechaReclamado}"  filterMatchMode="contains" filterBy="#{reclamo.fechaReclamado}">		                
			<p:cellEditor>
				<f:facet name="output">
					<p:calendar   id="fechaReclamadoout" mindate="#{reclamo.fechaReclamado}" maxdate="#{reclamo.fechaReclamado}" value="#{reclamo.fechaReclamado}" pattern="dd-MM-yyyy HH:mm" mask="true" />
				</f:facet>
				<f:facet name="input"> 
					<p:calendar id="fechaReclamadoin" value="#{reclamo.fechaReclamado}"  required="true"  pattern="dd-MM-yyyy HH:mm" mask="true"/>		 
 				</f:facet>
			</p:cellEditor>
		</p:column>
  
		<p:column headerText="Estado"  visible="#{mb_Reclamo.list[5]}" sortBy="#{reclamo.estado}"  filterMatchMode="contains" filterBy="#{reclamo.estado}">		                
			<p:cellEditor>
	     	<f:facet name="output"><h:outputText value="#{reclamo.estado}" /></f:facet>
	   		<f:facet name="input">
	    		<p:selectOneMenu id="estado" value="#{reclamo.estado}" style="width:85%">
						<f:selectItem  itemLabel="Pendiente" itemValue="pendiente" />
						<f:selectItem   itemLabel="Visitado" itemValue="visitado" />
						<f:selectItem   itemLabel="Anulado" itemValue="anulado" />				
					</p:selectOneMenu> 
	   		</f:facet>
	   	</p:cellEditor>
		</p:column> 
  
		<p:column headerText="F.Visita" visible="#{mb_Reclamo.list[6]}" sortBy="#{reclamo.fechaVisita}"  filterMatchMode="contains" filterBy="#{reclamo.fechaVisita}">		                
			<p:cellEditor>
				<f:facet name="output">
					<p:calendar   id="fechaVisitaout" mindate="#{reclamo.fechaVisita}" maxdate="#{reclamo.fechaVisita}" value="#{reclamo.fechaVisita}" pattern="dd-MM-yyyy HH:mm" mask="true" />
 				</f:facet>
				<f:facet name="input"> 
					<p:calendar id="fechaVisitain"  mindate="#{reclamo.fechaReclamado}" value="#{reclamo.fechaVisita}" pattern="dd-MM-yyyy HH:mm" mask="true" />
 				</f:facet>
			</p:cellEditor>
		</p:column>
  
		<p:column headerText="Tecnico"  visible="#{mb_Reclamo.list[7]}" style="min-width:120px;" sortBy="#{reclamo.funcionario.nombre}"  filterMatchMode="contains" filterBy="#{reclamo.funcionario.nombre}">		                
		   <p:cellEditor>
		   	<f:facet name="output"><h:outputText value="#{reclamo.funcionario.nombre}" /></f:facet>
		    <f:facet name="input">
					<p:autoComplete id="tecnico" value="#{reclamo.funcionario}"
					 	completeMethod="#{mb_Funcionario.completarFuncionario}"
						var="theme" itemLabel="#{theme.nombre}" itemValue="#{theme}"
					 	converter="ConverterFuncionario" forceSelection="false" 
					  style="float:left !important;margin:0px 0px 3px 0px;"
					  queryDelay="1000" >
					    <f:facet name="itemtip">
                <h:panelGrid columns="2" cellpadding="3">  
                    <h:outputText value="Area:" />
                    <h:outputText value="#{theme.area}" />
 
                    <h:outputText value="Telefono:" />
                    <h:outputText value="#{theme.telefono}" />
                </h:panelGrid>
            	</f:facet>		
					</p:autoComplete>
				</f:facet>
			</p:cellEditor>
		</p:column>
  
		<p:column headerText="MYR" visible="#{mb_Reclamo.list[8]}" sortBy="#{reclamo.myr}"  filterMatchMode="contains" filterBy="#{reclamo.myr}">		                
			<p:cellEditor>
       	<f:facet name="output"><h:outputText value="#{reclamo.myr}" /></f:facet>
      	<f:facet name="input"><p:inputText id="myr" value="#{reclamo.myr}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column> 
  
   	<p:column headerText="O.R." visible="#{mb_Reclamo.list[9]}" sortBy="#{reclamo.ordenreparacion}"  filterMatchMode="contains" filterBy="#{reclamo.ordenreparacion}">		                
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{reclamo.ordenreparacion}" /></f:facet>
	    	<f:facet name="input"><p:inputText id="ordenreparacion" value="#{reclamo.ordenreparacion}" /></f:facet>
   		</p:cellEditor>
		</p:column>  
  
	 	<p:column headerText="Obs." visible="#{mb_Reclamo.list[10]}" sortBy="#{reclamo.observaciones}"  filterMatchMode="contains" filterBy="#{reclamo.observaciones}">		                
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{reclamo.observaciones}" /></f:facet>
	    	<f:facet name="input"><p:inputText id="observaciones" value="#{reclamo.observaciones}" /></f:facet>
   		</p:cellEditor>
		</p:column> 
  
  
 		<p:column headerText="Urgente" visible="#{mb_Reclamo.list[11]}" sortBy="#{reclamo.urgente}"  filterMatchMode="contains" filterBy="#{reclamo.urgente}">		                
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{reclamo.urgente}" /></f:facet>
	    	<f:facet name="input">  
        	<p:selectOneMenu id="urgente" value="#{reclamo.urgente}" style="width:85%">
						<f:selectItem  itemLabel="SI" itemValue="SI" />
						<f:selectItem   itemLabel="NO" itemValue="NO" />
					</p:selectOneMenu>
				</f:facet>
   		</p:cellEditor>
		</p:column>   
   
  
 		<p:column headerText="E.MYR" visible="#{mb_Reclamo.list[12]}" sortBy="#{reclamo.myrEstado}"  filterMatchMode="contains" filterBy="#{reclamo.myrEstado}">		                
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{reclamo.myrEstado}" /></f:facet>
	    	<f:facet name="input">
	    		<p:selectOneMenu id="myrEstado" value="#{reclamo.myrEstado}" style="width:85%">
						<f:selectItem  itemLabel="Pendiente" itemValue="pen" />
						<f:selectItem   itemLabel="Liquidado" itemValue="liq" /> 		
					</p:selectOneMenu> 
	    	</f:facet>
   		</p:cellEditor>
		</p:column>  
		


		<p:column headerText="Antel" visible="#{mb_Reclamo.list[18]}" sortBy="#{reclamo.antel}"  filterMatchMode="contains" filterBy="#{reclamo.antel}">		                
			<p:cellEditor>
	        	<f:facet name="output"><h:outputText value="#{reclamo.antel}" /></f:facet>
	       		<f:facet name="input"><p:inputText id="antel" value="#{reclamo.antel}"  /></f:facet>
        	</p:cellEditor>
		</p:column> 
		  
		
					<p:column headerText="Conmutador" visible="#{mb_Reclamo.list[17]}" sortBy="#{reclamo.conmutador}"  filterMatchMode="contains" filterBy="#{reclamo.conmutador}">		                
			<p:cellEditor>
	        	<f:facet name="output"><h:outputText value="#{reclamo.conmutador}" /></f:facet>
	       		<f:facet name="input"><p:inputText id="conmutador" value="#{reclamo.conmutador}"  /></f:facet>
        	</p:cellEditor>
		</p:column>  
		
		
			<p:column headerText="Energia" visible="#{mb_Reclamo.list[15]}" sortBy="#{reclamo.energia}"  filterMatchMode="contains" filterBy="#{reclamo.energia}">		                
			<p:cellEditor>
	        	<f:facet name="output"><h:outputText value="#{reclamo.energia}" /></f:facet>
	       		<f:facet name="input"><p:inputText id="energia" value="#{reclamo.energia}"  /></f:facet>
        	</p:cellEditor>
		</p:column> 
		
		

	 	<p:column headerText="Red" sortBy="#{reclamo.red}" visible="#{mb_Reclamo.list[13]}" filterMatchMode="contains" filterBy="#{reclamo.red}">		                
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{reclamo.red}" /></f:facet>
	    	<f:facet name="input"><p:inputText id="red" value="#{reclamo.red}" /></f:facet>
   		</p:cellEditor>
		</p:column>   

	 	<p:column headerText="Tel" visible="#{mb_Reclamo.list[14]}" sortBy="#{reclamo.telefonos}"  filterMatchMode="contains" filterBy="#{reclamo.telefonos}">		                
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{reclamo.telefonos}" /></f:facet>
	    	<f:facet name="input"><p:inputText id="telefonos" value="#{reclamo.telefonos}"  /></f:facet>
   		</p:cellEditor>
		</p:column>  


	



	<p:column headerText="Contacto" visible="#{mb_Reclamo.list[16]}" sortBy="#{reclamo.contacto}"  filterMatchMode="contains" filterBy="#{reclamo.contacto}">		                
			<p:cellEditor>
	        	<f:facet name="output"><h:outputText value="#{reclamo.contacto}" /></f:facet>
	       		<f:facet name="input"><p:inputText id="contacto" value="#{reclamo.contacto}" /></f:facet>
        	</p:cellEditor>
		</p:column> 


	 
		  
		  
		  
		   <p:column toggleable="false" headerText="Edit"  style = "width:20px" rendered="#{mb_Usuario.acceso('EDITAR',mb_Usuario.reclamos)}">				
					<p:rowEditor>
					</p:rowEditor>	
									
		    </p:column>
		     
		    <p:column toggleable="false" headerText="Bor"  style = "width:20px"  rendered="#{mb_Usuario.acceso('BORRAR',mb_Usuario.reclamos)}" >	
			<p:commandLink actionListener="#{mb_Reclamo.delete(reclamo)}" 
   	
   	update="formreclamo message" >
        <p:confirm header="Confirmacion" message="Estas seguro?" icon="ui-icon-alert" />
  <span class="ui-icon ui-icon-trash"></span>
   	</p:commandLink>    
    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        <p:commandButton value="Borrar" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
        <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
    </p:confirmDialog>
			</p:column>
		    	   

	
	</p:dataTable>

	<p:contextMenu for="datatable2">
  	<p:menuitem value="Ver detalles" update="detalles" icon="ui-icon-search" oncomplete="PF('dialogodetalles').show()"/>
  </p:contextMenu>

<p:dialog header="Detalle funcionario" widgetVar="dialogodetalles" modal="true" showEffect="fade" hideEffect="fade" >
        <p:outputPanel id="detalles" style="text-align:center;">
                <p:panelGrid  columns="2" rendered="#{not empty mb_Reclamo.reclamoSelected}" columnClasses="label,value">
                



                
               <h:outputText value="Id:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.id}" /> 
              
               <h:outputText value="Cliente:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.nombreCliente}" /> 
               
               <h:outputText value="Codigo:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.codigo}" /> 
               
               <h:outputText value="Reclamo:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.reclamo}" /> 
               
               <h:outputText value="F.Reclamado:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.fechaReclamado}" /> 
              
               <h:outputText value="Estado:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.estado}" /> 
               
               <h:outputText value="F.Visita:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.fechaVisita}" /> 
               
               <h:outputText value="Tecnico:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.funcionario.nombre}" /> 
               
               <h:outputText value="MYR:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.myr}" /> 
                              
               <h:outputText value="O.R.:" />
               <h:outputText value="#{mb_Reclamo.ordenreparacion}" /> 
                              
               <h:outputText value="Observaciones:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.observaciones}" /> 
                              
               <h:outputText value="Urgente:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.urgente}" /> 
                              
               <h:outputText value="MYR estado:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.myrEstado}" /> 
                              
               <h:outputText value="H.Red" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.red}" /> 
                              
               <h:outputText value="H.Telefono:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.telefonos}" /> 
                              
               <h:outputText value="H.Energia:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.energia}" /> 
                                             
               <h:outputText value="H.Conmutador:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.conmutador}" /> 
                                             
               <h:outputText value="H.Antel:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.antel}" /> 

               <h:outputText value="Contacto:" />
               <h:outputText value="#{mb_Reclamo.reclamoSelected.contacto}" /> 

           </p:panelGrid>
       </p:outputPanel>
   </p:dialog>









</h:form> 
			
 			
				
	</ui:composition>
</html>



<!--   <f:event type="preRenderView" listener="#{mb_Reclamo.recargar}" /> -->

<!--   <p:ajax event="rowSelect" listener="#{mb_Reclamo.onRowReclamoSelect}" update=":formreclamo:detalles" oncomplete="PF('dialogodetalles').show()" /> -->
  

 