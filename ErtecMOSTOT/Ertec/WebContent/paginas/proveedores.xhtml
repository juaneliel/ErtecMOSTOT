<?xml version='1.0' encoding='UTF-8' ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition template="/templates/layout.xhtml"
 xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
      


      
<ui:define name="cuerpo"> 
 
<h:form id="formproveedor">
 
 	<p:dataTable var="proveedor" value="#{mb_Proveedores.lista}" id="datatableproveedor" widgetVar="datatableproveedor"
			selection="#{mb_Proveedores.proSelected}" selectionMode="single" rowKey="#{proveedor.proveedorID}"
		 paginator="true" rows ="50" resizableColumns="true" liveResize="true" draggableColumns="true" 
		 scrollable="true"    scrollWidth="100%"   currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords}" 
		 editable="true"   emptyMessage="Sin Registros"
		 style="text-align:left;	font-size: 90% !important;color: red;font-weight: bold;" 
		 	 paginatorTemplate=" {agregar} {titulo} {CurrentPageReport} {RowsPerPageDropdown}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters} {vercol}"
    rowsPerPageTemplate="10,50,100"	sortBy="#{proveedor.proveedorID}" sortOrder="descending"
		 >
		 
		 		  <f:facet name="{Exporters}">
	    <h:commandLink>
	      <p:graphicImage name="/images/excel.png" width="24"/>
	      <p:dataExporter type="xls" target="datatableproveedor" fileName="proveedor"   />
	    </h:commandLink>
	
	    <h:commandLink>
	      <p:graphicImage name="/images/pdf.png" width="24"/>
	      <p:dataExporter type="pdf" target="datatableproveedor" fileName="proveedor"   />
	    </h:commandLink> 
		</f:facet>
		 
		<f:facet name="{titulo}">
		 Proveedor	 		        
		</f:facet>
		    
		 <f:facet name="{agregar}">    
		  <p:commandButton value="Agregar"  onclick="PF('addproveedor').show()" style="float:left"  rendered="#{mb_Usuario.acceso('AGREGAR','proveedor')}"/>      
      
     </f:facet>      
       
		 
		 <f:facet name="{vercol}">   
		         <p:commandButton id="toggler" type="button" value="Elegir Columnas" style="float:right" icon="ui-icon-calculator" />
        <p:columnToggler datasource="datatableproveedor" trigger="toggler" />

		    </f:facet> 
		 

 <p:ajax event="rowEdit" listener="#{mb_Proveedores.editProveedor}" update="message" />

  
    <p:column headerText="" style = "width:0px" exportable="false"  rendered="#{mb_Usuario.acceso('EDITAR','proveedor')}">				
					<p:rowEditor   >
					</p:rowEditor>					
		 </p:column>

	<p:column headerText="Id:" sortBy="#{proveedor.proveedorID}"  filterMatchMode="startsWith" filterBy="#{proveedor.proveedorID}">		                
	    <h:outputText value="#{proveedor.proveedorID}"/>
    </p:column>
 

		<p:column headerText="Nombre:" sortBy="#{proveedor.nombre}"  filterMatchMode="contains" filterBy="#{proveedor.nombre}">		                
		   <p:cellEditor>
		         <f:facet name="output"><h:outputText value="#{proveedor.nombre}" /></f:facet>
		         <f:facet name="input"><p:inputText id="Nombre" value="#{proveedor.nombre}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column> 
 
    
    		<p:column headerText="Direccion" sortBy="#{proveedor.direccion}"  filterMatchMode="contains" filterBy="#{proveedor.direccion}">		                
		   <p:cellEditor>
		         <f:facet name="output"><h:outputText value="#{proveedor.direccion}" /></f:facet>
		         <f:facet name="input"><p:inputText id="Direccion" value="#{proveedor.direccion}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column> 
     
 	<p:column headerText="Email:" sortBy="#{proveedor.email}"  filterMatchMode="contains" filterBy="#{proveedor.email}">		                
		   <p:cellEditor>
		         <f:facet name="output"><h:outputText value="#{proveedor.email}" /></f:facet>
		         <f:facet name="input"><p:inputText id="Email" value="#{proveedor.email}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column> 
    
  
 
 	<p:column headerText="telefono" sortBy="#{proveedor.telefono}"  filterMatchMode="startsWith" filterBy="#{proveedor.telefono}">		                
		   <p:cellEditor>
		         <f:facet name="output"><h:outputText value="#{proveedor.telefono}" /></f:facet>
		         <f:facet name="input"><p:inputText id="telefono" value="#{proveedor.telefono}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column> 
    
  

	<p:column headerText="Fax:" sortBy="#{proveedor.fax}"  filterMatchMode="contains" filterBy="#{proveedor.fax}">		                
		   <p:cellEditor>
		         <f:facet name="output"><h:outputText value="#{proveedor.fax}" /></f:facet>
		         <f:facet name="input"><p:inputText id="Fax" value="#{proveedor.fax}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column>  
 
 	<p:column headerText="Observacion" sortBy="#{proveedor.observacion}"  filterMatchMode="contains" filterBy="#{proveedor.observacion}">		                
		   <p:cellEditor>
		         <f:facet name="output"><h:outputText value="#{proveedor.observacion}" /></f:facet>
		         <f:facet name="input"><p:inputText id="Observacion" value="#{proveedor.observacion}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column> 
    
  
 
 	<p:column headerText="RUC" sortBy="#{proveedor.ruc}"  filterMatchMode="startsWith" filterBy="#{proveedor.ruc}">		                
		   <p:cellEditor>
		         <f:facet name="output"><h:outputText value="#{proveedor.ruc}" /></f:facet>
		         <f:facet name="input"><p:inputText id="RUC" value="#{proveedor.ruc}" style="width:100%"/></f:facet>
			</p:cellEditor>
		</p:column> 
 
  
    

		    
		     
			<p:column headerText="Bor"  style = "width:50px" rendered="#{mb_Usuario.acceso('BORRAR','proveedor')}" exportable="false">	
			 <p:commandButton icon="ui-icon-trash" id="trash"  actionListener="#{mb_Proveedores.delete(proveedor)}" 
			 update="datatableproveedor message">
			     <p:confirm header="Confirmacion" message="Estas seguro?" icon="ui-icon-alert" />
			 </p:commandButton>
			 <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
			     <p:commandButton value="Borrar" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
			     <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
			 </p:confirmDialog>
			</p:column>
    
    
 
</p:dataTable>

 

</h:form>
 

<script type="text/javascript">
    function handleAddProveedorRequest(xhr, status, args) { 
        if(args.validationFailed ) {
            PF('addproveedor').jq.effect("shake", {times:5}, 100);
        }
        else {
            PF('addproveedor').hide(); 
           // PF('datatablearticulos').addRow();
        }
    }       
</script>

<p:dialog id="addproveedor" header="Agregar orden de trabajo"  widgetVar="addproveedor" showEffect="explode" hideEffect="fade"  modal="true"   dynamic="true"   >
 <h:form> 
 
 <p:panelGrid id="panel" columns="2" border="1"
   cellpadding="5" cellspacing="1">    
   
    <h:outputLabel value="Nombre:" for="n" />
    <h:inputText id="n" label="nombre" value="#{mb_Proveedores.proveedorAdd.nombre}"  /> 
      
      <h:outputLabel value="Direccion:" for="direccion" />
    <h:inputText id="direccion" label="direccion" value="#{mb_Proveedores.proveedorAdd.direccion}"  /> 
      
      <h:outputLabel value="Email" for="email" />
    <h:inputText id="email" label="email" value="#{mb_Proveedores.proveedorAdd.email}"  /> 
    
       <h:outputLabel value="Telefono:" for="telefono" />
    <h:inputText id="telefono" label="telefono" value="#{mb_Proveedores.proveedorAdd.telefono}"  /> 
  
     <h:outputLabel value="Fax:" for="fax" />
    <h:inputText id="fax" label="fax" value="#{mb_Proveedores.proveedorAdd.fax}"  /> 
  
   <h:outputLabel value="Observacion" for="observacion" />
    <h:inputText id="observacion" label="observacion" value="#{mb_Proveedores.proveedorAdd.observacion}"  /> 
   
    <h:outputLabel value="Ruc:" for="ruc" />
    <h:inputText id="ruc" label="ruc" value="#{mb_Proveedores.proveedorAdd.ruc}"  /> 
  

    <p:column colspan="2">
		<h:commandButton value="Agregar" action="#{mb_Proveedores.add}"   />	  
    </p:column>

</p:panelGrid>  
 
 </h:form>
</p:dialog>




</ui:define>
</ui:composition>






